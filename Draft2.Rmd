---
title: "Draft2"
output: slidy_presentation
date: '2022-04-18'
---

# Load libraries 
```{r}
library(tidyverse)
library(dplyr)
library(ggplot2)
```

# Add in Data 
```{r}
deaths_df <- data.frame(read.csv("death-rates-from-air-pollution.csv"))
deaths_df

colnames(deaths_df) <- c("country", "acronym", "year", "total_deaths", 
                         "indoor_deaths", "outdoor_deaths", "ozone_deaths")

glimpse(deaths_df)
```

# Questions to Consider 

## Which country has the greatest number of deaths? The least? (dependent on population)

```{r, include=FALSE}
# Want the range 2007-2017 
# took this out c(2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017)

#Maybe try increments...?
#When looking at it you can see a decrease among the three years 
#death_07<- deaths_df %>% 
  #group_by(country) %>% 
  #filter(year == 2007) %>% 
  #select(total_deaths) %>% 
  #summarize(average_death_07 = mean(total_deaths))

#death_12<- deaths_df %>% 
  #group_by(country) %>% 
  #filter(year == 2012) %>% 
  #select(total_deaths) %>% 
  #summarize(average_death_12 = mean(total_deaths))

#death_17<- deaths_df %>% 
  #group_by(country) %>% 
  #filter(year == 2017) %>% 
  #select(total_deaths) %>% 
  #summarize(average_death_17 = mean(total_deaths))

#try to have one cohesive table so it's easier to visualize 
#combo <- death_07 %>% 
  #mutate(death_12) %>% 
  #mutate(death_17)

#combo

#Then graph it 
#Just realized there's 200+ countries....the x-axis looks terrible 
#Would be nice to color by continent but then that would mean going through each country
#ggplot(death_07, aes(x= country, y=average_death_07)) +
  #geom_point() +
  #theme(axis.text.x = element_text(angle = 15)) #yah..no rotation made it worse


```
# Separation by Population
```{r, echo=FALSE}
#SCRATCH WORK ABOVE 

#Not sure if we want to use the selected few countries we looked at earlier?
#Or if we wanted to use this as a overview of the data
library(knitr)
#install.packages('kableExtra')
library(kableExtra)

#separation by high vs low population among continents 
death_07_high <- deaths_df %>% 
  filter(year == 2007, country %in% c('United States', 'Brazil', 'Ethiopia', 'Russia', 'China', 'Australia')) %>% 
  group_by(country) %>% 
  select(total_deaths) %>% 
  summarize(average_death_07_high = mean(total_deaths))
#death_07_high


death_07_low<- deaths_df %>% 
  filter(year == 2007, country %in% c('Canada', 'Argentina', 'Seychelles', 'Romania', 'Israel', 'Tonga')) %>% 
  group_by(country) %>% 
  select(total_deaths) %>% 
  summarize(average_death_07_low = mean(total_deaths))
#death_07_low

#Side by side table 
#kable(list(death_07_high, death_07_low))
kable(death_07_high) %>% 
  kable_styling(full_width = FALSE, position = 'float_left')
kable(death_07_low) %>% 
  kable_styling(full_width = FALSE, position = 'left')

death_12_high <- deaths_df %>% 
  filter(year == 2012, country %in% c('United States', 'Brazil', 'Ethiopia', 'Russia', 'China', 'Australia')) %>% 
  group_by(country) %>% 
  select(total_deaths) %>% 
  summarize(average_death_12_high = mean(total_deaths))
#death_12_high

death_12_low<- deaths_df %>% 
  filter(year == 2012, country %in% c('Canada', 'Argentina', 'Seychelles', 'Romania', 'Israel', 'Tonga')) %>% 
  group_by(country) %>% 
  select(total_deaths) %>% 
  summarize(average_death_12_low = mean(total_deaths))
#death_12_low

#Combo table 2012
#kable(list(death_12_high, death_12_low))
kable(death_12_high) %>% 
  kable_styling(full_width = FALSE, position = 'float_left')
kable(death_12_low) %>% 
  kable_styling(full_width = FALSE, position = 'left')

death_17_high <- deaths_df %>% 
  filter(year == 2017, country %in% c('United States', 'Brazil', 'Ethiopia', 'Russia', 'China', 'Australia')) %>% 
  group_by(country) %>% 
  select(total_deaths) %>% 
  summarize(average_death_17_high = mean(total_deaths))
#death_17_high

death_17_low<- deaths_df %>% 
  filter(year == 2017, country %in% c('Canada', 'Argentina', 'Seychelles', 'Romania', 'Israel', 'Tonga')) %>% 
  group_by(country) %>% 
  select(total_deaths) %>% 
  summarize(average_death_17_low = mean(total_deaths))
#death_17_low

#Combo table 2017
#kable(list(death_17_high, death_17_low))
kable(death_17_high) %>% 
  kable_styling(full_width = FALSE, position = 'float_left')
kable(death_17_low) %>% 
  kable_styling(full_width = FALSE, position = 'left')

#Graph selected countries 
#Is there a way to color by low and high and combine the two graphs below?
#I removed combo_07 so this might not work... 

#combo_07 %>% 
  #ggplot(aes(x = country, y = average_death_07_low)) + 
  #geom_point()

#combo_07 %>% 
  #ggplot(aes(x = country, y = average_death_07_high)) + 
  #geom_point()
```

## Which type of air pollution has the greatest number of deaths (indoor, outdoor, particulate, or outdoor ozone)?

```{r}
glimpse(deaths_df)

#This is the average of all countries by type of air pollutant death
deaths_df %>% 
  group_by(country) %>% 
  select(indoor_deaths, outdoor_deaths, ozone_deaths) %>% 
  summarize(avg_indoor = mean(indoor_deaths), avg_outdoor = mean(outdoor_deaths), avg_ozone = mean(ozone_deaths))
  
#Sort descending to see which country had the highest of each...(not sure if this is right)
#does separating the arrange individually fix it??
deaths_df %>% 
  group_by(country) %>% 
  select(indoor_deaths, outdoor_deaths, ozone_deaths) %>% 
  summarize(avg_indoor = mean(indoor_deaths), avg_outdoor = mean(outdoor_deaths), avg_ozone = mean(ozone_deaths)) %>% 
  arrange(desc(avg_indoor), desc(avg_outdoor), desc(avg_ozone))
```

## Which year had the worst air pollution (average the three diff types)?

```{r}
deaths_df %>% 
  group_by(country, year) %>% 
  summarize(avg_indoor = mean(indoor_deaths), avg_outdoor = mean(outdoor_deaths), avg_ozone = mean(ozone_deaths)) %>% 
  arrange(desc(avg_indoor)) %>% 
  arrange(desc(avg_outdoor)) %>% 
  arrange(desc(avg_ozone))
````

## Which year had the worst indoor? Outdoor particulate? Outdoor ozone?

```{r}
#Probably need to fix the above to answer this one 


````

# Notes from first meeting 

## Hone in to only one year. Find data that is only population, continent data. Choose a couple countries/continents to work on 

## Look at industrialized vs non-industrialized countries 
